# Plan d'Intégration du Coach IA ("Second de Bord")

Nous allons créer un assistant intelligent contextuel, intégré directement dans le Dashboard (`/app/today`), capable de coacher l'entrepreneur sur ses livrables quotidiens.

## 1. Architecture Technique (Backend & API)

L'IA ne doit pas être un simple "proxy" vers ChatGPT. Elle doit avoir du contexte.

*   **API Route (`/api/ai/coach`)** : Création d'un endpoint sécurisé pour traiter les requêtes.
*   **System Prompt Dynamique** :
    *   Le prompt ne sera pas statique. Il sera construit dynamiquement en injectant :
        1.  **Le Contexte du Jour** : Récupéré depuis la base de données (Titre de la mission, Objectif du jour).
        2.  **Le Profil Utilisateur** : (Si disponible) Son métier, son offre (stockés en DB).
        3.  **Le Rôle** : "Tu es un Directeur Artistique et Sales Coach impitoyable mais bienveillant."
*   **Service OpenAI** : Utilisation du SDK OpenAI (modèle `gpt-4o` ou `gpt-4-turbo` pour la rapidité/qualité).

## 2. Interface Utilisateur (Frontend - Dashboard)

L'intégration doit être fluide et non intrusive.

*   **Nouveau Composant `AICoachWidget`** :
    *   **Position** : En bas à droite (flottant) ou intégré dans la colonne de droite (sous le Chat Binôme) pour être toujours accessible.
    *   **État "Veille"** : Un bouton discret "Demander conseil au Coach".
    *   **État "Actif"** : Une fenêtre de chat dédiée (distincte du chat binôme).
*   **Fonctionnalités UX** :
    *   **Templates de questions** (Chips) basés sur le jour (ex: J1 -> "Valide mon idée", J3 -> "Critique mon post").
    *   **Streaming** : Réponses affichées mot à mot pour l'effet "temps réel".

## 3. Workflow de Développement

1.  **Configuration** : Ajouter la clé API OpenAI dans `.env`.
2.  **Backend** : Créer le service `openai.ts` et la route API.
3.  **Frontend** : Créer le composant `AICoachWidget` et l'intégrer dans `CockpitDashboard`.
4.  **Prompt Engineering** : Affiner le "System Prompt" pour qu'il soit sec, précis et orienté action (pas de blabla générique).

**Question pour toi avant de coder :**
Préféres-tu que le Coach soit une fenêtre flottante (comme un chatbot de support) ou un bloc fixe dans la colonne de droite (pour qu'il fasse partie intégrante du "tableau de bord") ? (Je recommande le bloc fixe pour l'aspect "outil de travail").
